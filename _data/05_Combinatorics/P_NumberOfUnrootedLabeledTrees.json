{
  "language": "INFORMAL",
  "remarks": "",
  "statement": "(Cayley) The number of \\[isomorphism classes of\\] labeled trees on $n$\nvertices $[n]=\\{1,2,\\ldots,n\\}$ is $n^{n-2}$.\n\nThis is sequence A000272 in the\n\nFor $n=1$ and $n=2$ the result is obvious. For $n=3$, the possible trees\nare $$\\fbox{ \\xygraph{\n!{(0,0) }*+{\\bullet_{1}}=\"1\"\n!{(1,0) }*+{\\bullet_{2}}=\"2\"\n!{(2,0) }*+{\\bullet_{3}}=\"3\"\n!{(0,.5) }*+{\\bullet_{1}}=\"4\"\n!{(1,.5) }*+{\\bullet_{3}}=\"5\"\n!{(2,.5) }*+{\\bullet_{2}}=\"6\"\n!{(0,1) }*+{\\bullet_{2}}=\"7\"\n!{(1,1) }*+{\\bullet_{1}}=\"8\"\n!{(2,1) }*+{\\bullet_{3}}=\"9\"\n\"1\"-\"2\" \"2\"-\"3\"\n\"4\"-\"5\" \"5\"-\"6\"\n\"7\"-\"8\" \"8\"-\"9\"\n} }$$ while for $n=4$, the $4^2=16$ trees fall into two groups: $12$\ntrees with linear structure and $4$ with a star structure. There are\n$12$ linear trees since there are $24$ orderings of $1,2,3,4$ and mirror\norderings give the same tree; there are $4$ star trees since the tree is\ndetermined by its central element.\n\nThere are many proofs of this theorem; the demonstration we give uses\nthe *Pr\u00fcfer bijection*, which associates with each such tree its *Pr\u00fcfer\ncode*; it is easily seen that the number of Pr\u00fcfer codes on $[n]$ is\n$n^{n-2}$.\n\nA *Pr\u00fcfer code* on $[n]$ is a sequence of $n-2$ elements\n$a_1,a_2,\\ldots,a_{n-2}$ chosen from $[n]$ (repetitions are allowed).\nObviously there are $n^{n-2}$ codes on $n$ symbols.\n\nGiven a tree $T$ on $[n]$ with $n\\geq 3$, convert it to a Pr\u00fcfer code\nusing the following algorithm:\n\n` for j=1 to n-2 let l_j be the vertex in T with the smallest label let a_j be the vertex adjacent to l_j remove l_j from T next j `\n\nWhen this process completes, the result will be a Pr\u00fcfer code (of length\n$n-2$) on $n$ symbols; this mapping is clearly well-defined.\n\nLet\u2019s walk through a more complicated example. Consider the following\ntree on $8$ vertices: $$\\fbox{ \\xygraph{\n!{(0,0)   }*+{\\bullet_{4}}=\"4\"\n!{(0.5,0.5) }*+{\\bullet_{1}}=\"1\"\n!{(0.5,1) }*+{\\bullet_{3}}=\"3\"\n!{(1,1)   }*+{\\bullet_{6}}=\"6\"\n!{(1.25,.5)   }*+{\\bullet_{2}}=\"2\"\n!{(1,0)   }*+{\\bullet_{5}}=\"5\"\n!{(1.75,.5) }*+{\\bullet_{7}}=\"7\"\n!{(1.5,0) }*+{\\bullet_{8}}=\"8\"\n\"1\"-\"2\" \"1\"-\"3\" \"1\"-\"4\" \"1\"-\"5\"\n\"3\"-\"6\"\n\"2\"-\"7\" \"2\"-\"8\"\n} }$$ Using the algorithm above, we get\n\n   $l_j$   $a_j$\n  ------- -------\n    $4$     $1$\n    $5$     $1$\n    $6$     $3$\n    $3$     $1$\n    $1$     $2$\n    $7$     $2$\n\nand thus the Pr\u00fcfer code associated with this tree is $1,1,3,1,2,2$.\n\nThe easiest way to see that this map is a bijection is by explicitly\nconstructing its inverse. To do this, we must show how to construct a\ntree $T$ on $[n]$ given a Pr\u00fcfer code on $n$ symbols.\n\nNote first that the code for a given tree contains only the non-leaf\nvertices, and that each non-leaf vertex appears at least once in the\ncode. The first of these statements is obvious from the algorithm -\ngiven that $n\\geq 3$ and since the algorithm stops when there are only\ntwo vertices left in the tree, no leaf vertex in the original tree can\nbe selected as an $a_j$.\n\nTo see that every non-leaf must appear in the list, note that each\nvertex was either removed as one of the $l_j$ or it remains in the\ntwo-vertex tree at the end of the process. In either event, one of its\nadjacent vertices was removed from the tree at some point, so the vertex\nwould appear in the code. In fact, it is clear that the number of times\neach vertex appears in the code is one less than its degree in the tree.\n\nGiven this, it\u2019s rather straightforward to reconstruct the tree.\nConsider $a_1$. The leaf that was removed ($l_1$) must be the smallest\nleaf vertex, which is the smallest number not appearing in the code. It\nmust attach to $a_1$. Essentially, this process continues as one moves\nforward through the $a_j$, except that allowances must be made for\nnon-leaf vertices that are removed at later steps as they become leaf\nvertices. Here is an algorithm to reconstruct a tree from a Pr\u00fcfer code:\n\n` A\\leftarrow the set of leaf vertices T\\leftarrow the connected tree on the two vertices a_{n-2} and the highest-numbered leaf for j=1 to n-2 add a_j and the lowest-numbered node l in A to T (if not already in T) add an edge in T between a_j and l remove l from A if a_k\\neq a_j for any k>j, add a_j to A next j `\n\nLet\u2019s see how this process works on the Pr\u00fcfer code above.\n\nWe start by letting $T$ be the tree on the two vertices $2$ and $8$ with\nan edge between them: $$\\fbox{ \\xygraph{\n!{(1.25,.5)   }*+{\\bullet_{2}}=\"2\"\n!{(1.5,0) }*+{\\bullet_{8}}=\"8\"\n\"2\"-\"8\"\n} }$$ The initial value for $A$ (the available vertices) is $4,5,6,7$.\n\n$a_1=1$, so add $1, 4$, and an edge between $1$ and $4$ to $T$. $1$\nappears later in $A$, so we do not add it to $A$. $$\\fbox{ \\xygraph{\n!{(0,0)   }*+{\\bullet_{4}}=\"4\"\n!{(0.5,0.5) }*+{\\bullet_{1}}=\"1\"\n!{(1.25,.5)   }*+{\\bullet_{2}}=\"2\"\n!{(1.5,0) }*+{\\bullet_{8}}=\"8\"\n\"1\"-\"4\" \"2\"-\"8\"\n} }$$\n\n$a_2=1$ and $A=\\{5,6,7\\}$, so add $5$ and an edge between $1$ and $5$:\n$$\\fbox{ \\xygraph{\n!{(0,0)   }*+{\\bullet_{4}}=\"4\"\n!{(0.5,0.5) }*+{\\bullet_{1}}=\"1\"\n!{(1.25,.5)   }*+{\\bullet_{2}}=\"2\"\n!{(1,0)   }*+{\\bullet_{5}}=\"5\"\n!{(1.5,0) }*+{\\bullet_{8}}=\"8\"\n\"1\"-\"4\" \"1\"-\"5\"\n\"2\"-\"8\"\n} }$$\n\n$a_3=3$ and $A=\\{6,7\\}$. Add $3, 6$ and an edge from $3$ to $6$. This is\nthe last occurrence of $3$ in the code, so add $3$ to $A$.\n$$\\fbox{ \\xygraph{\n!{(0,0)   }*+{\\bullet_{4}}=\"4\"\n!{(0.5,0.5) }*+{\\bullet_{1}}=\"1\"\n!{(0.5,1) }*+{\\bullet_{3}}=\"3\"\n!{(1,1)   }*+{\\bullet_{6}}=\"6\"\n!{(1.25,.5)   }*+{\\bullet_{2}}=\"2\"\n!{(1,0)   }*+{\\bullet_{5}}=\"5\"\n!{(1.5,0) }*+{\\bullet_{8}}=\"8\"\n\"1\"-\"4\" \"1\"-\"5\"\n\"3\"-\"6\"\n\"2\"-\"8\"\n} }$$\n\n$a_4=1$ and $A=\\{3,7\\}$. Add an edge from $1$ to $3$. Add $1$ to $A$.\n$$\\fbox{ \\xygraph{\n!{(0,0)   }*+{\\bullet_{4}}=\"4\"\n!{(0.5,0.5) }*+{\\bullet_{1}}=\"1\"\n!{(0.5,1) }*+{\\bullet_{3}}=\"3\"\n!{(1,1)   }*+{\\bullet_{6}}=\"6\"\n!{(1.25,.5)   }*+{\\bullet_{2}}=\"2\"\n!{(1,0)   }*+{\\bullet_{5}}=\"5\"\n!{(1.5,0) }*+{\\bullet_{8}}=\"8\"\n\"1\"-\"3\" \"1\"-\"4\" \"1\"-\"5\"\n\"3\"-\"6\"\n\"2\"-\"8\"\n} }$$\n\n$a_5=2$ and $A=\\{1,7\\}$. Add an edge from $1$ to $2$. $$\\fbox{ \\xygraph{\n!{(0,0)   }*+{\\bullet_{4}}=\"4\"\n!{(0.5,0.5) }*+{\\bullet_{1}}=\"1\"\n!{(0.5,1) }*+{\\bullet_{3}}=\"3\"\n!{(1,1)   }*+{\\bullet_{6}}=\"6\"\n!{(1.25,.5)   }*+{\\bullet_{2}}=\"2\"\n!{(1,0)   }*+{\\bullet_{5}}=\"5\"\n!{(1.5,0) }*+{\\bullet_{8}}=\"8\"\n\"1\"-\"2\" \"1\"-\"3\" \"1\"-\"4\" \"1\"-\"5\"\n\"3\"-\"6\"\n\"2\"-\"8\"\n} }$$\n\n$a_6=2$ and $A=\\{7\\}$. Add $7$ and an edge from $2$ to $7$.\n$$\\fbox{ \\xygraph{\n!{(0,0)   }*+{\\bullet_{4}}=\"4\"\n!{(0.5,0.5) }*+{\\bullet_{1}}=\"1\"\n!{(0.5,1) }*+{\\bullet_{3}}=\"3\"\n!{(1,1)   }*+{\\bullet_{6}}=\"6\"\n!{(1.25,.5)   }*+{\\bullet_{2}}=\"2\"\n!{(1,0)   }*+{\\bullet_{5}}=\"5\"\n!{(1.75,.5) }*+{\\bullet_{7}}=\"7\"\n!{(1.5,0) }*+{\\bullet_{8}}=\"8\"\n\"1\"-\"2\" \"1\"-\"3\" \"1\"-\"4\" \"1\"-\"5\"\n\"3\"-\"6\"\n\"2\"-\"7\" \"2\"-\"8\"\n} }$$\n\nWe have reconstructed the original tree.",
  "citations": [
    {
      "textCitation": "https://planetmath.org/NumberOfUnrootedLabeledTrees"
    }
  ],
  "indexable": true,
  "names": [
    "number of unrooted labeled trees"
  ]
}