{
  "alternatePhrases": [
    "shuffle product",
    "shuffle-closed",
    "shuffle-closure"
  ],
  "definition": "Let $\\Sigma$ be an alphabet and $u,v$ words over $\\Sigma$. A *shuffle*\n$w$ of $u$ and $v$ can be loosely defined as a word that is obtained by\nfirst decomposing $u$ and $v$ into individual pieces, and then combining\n(by concatenation) the pieces to form $w$, in a way that the order of\nthe pieces in each of $u$ and $v$ is preserved.\n\nMore precisely, a *shuffle* of $u$ and $v$ is a word of the form\n$$u_1v_1\\cdots u_k v_k$$ where $u=u_1\\cdots u_n$ and $v=v_1\\cdots v_n$.\nIn other words, a shuffle of $u$ and $v$ is either a $k$-insertion of\neither $u$ into $v$ or $v$ into $u$, for some positive integer $k$.\n\nThe set of all shuffles of $u$ and $v$ is called *the* shuffle of $u$\nand $v$, and is denoted by $$u \\diamond v.$$ The shuffle operation can\nbe more generally applied to languages. If $L_1, L_2$ are languages, the\nshuffle of $L_1$ and $L_2$, denoted by $L_1 \\diamond L_2$, is the set of\nall shuffles of words in $L_1$ and $L_2$. In short,\n$$L_1\\diamond L_2 = \\bigcup \\lbrace u \\diamond v \\mid u\\in L_1, v\\in L_2 \\rbrace.$$\n\nClearly, $u\\diamond v = \\lbrace u\\rbrace \\diamond \\lbrace v\\rbrace$. We\nshall also identify $L\\diamond u$ and $u \\diamond L$ with\n$L \\diamond \\lbrace u\\rbrace$ and $\\lbrace u \\rbrace \\diamond L$\nrespectively.\n\nA language $L$ is said to be *shuffle closed* if\n$L\\diamond L\\subseteq L$. Clearly $\\Sigma^*$ is shuffle closed, and\narbitrary intersections shuffle closed languages are shuffle closed.\nGiven any language $L$, the smallest shuffle closed containing $L$ is\ncalled the *shuffle closure* of $L$, and is denoted by $L^{\\diamond}$.\n\nIt is easy to see that $\\diamond$ is a commutative operation:\n$u\\diamond v = v\\diamond u$. It is also not hard to see that $\\diamond$\nis associative: $(u\\diamond v)\\diamond w = u\\diamond (v\\diamond w)$.\n\nIn addition, the shuffle operation has the following recursive property:\nfor any $u,v$ over $\\Sigma$, and any $a,b\\in \\Sigma$:\n\n1.  $u \\diamond \\lambda = \\lbrace u \\rbrace$,\n\n2.  $\\lambda \\diamond v = \\lbrace v \\rbrace$,\n\n3.  $ua \\diamond vb = (ua \\diamond v)\\lbrace b\\rbrace \\cup (u\\diamond vb)\\lbrace a\\rbrace$.\n\nFor example, suppose $u=aba$, $v=bab$. Then $$\\begin{aligned}\nu\\diamond v &=& [aba \\diamond ba]\\lbrace b\\rbrace \\cup [ab \\diamond bab]\\lbrace a\\rbrace \\\\\n&=& [(aba \\diamond b) \\cup (ab \\diamond ba) ]\\lbrace ab\\rbrace \\cup [(ab \\diamond ba) \\cup (a \\diamond bab) ]\\lbrace ba\\rbrace \\\\\n&=& (ab \\diamond ba)\\lbrace ab,ba\\rbrace \\cup (aba\\diamond b)\\lbrace ab\\rbrace \\cup (a\\diamond bab)\\lbrace ba\\rbrace \\\\\n&=& \\lbrace abba, baab, abab, baba\\rbrace \\lbrace ab,ba\\rbrace \\cup \\lbrace baba, abba, abab \\rbrace \\lbrace ab\\rbrace \\cup \\lbrace abab, baab, baba \\rbrace \\lbrace ba \\rbrace \\\\\n&=& \\lbrace abba, baab, abab, baba\\rbrace \\lbrace ab,ba\\rbrace \\\\\n&=& \\lbrace abbaab, baabab, ababab, babaab, abbaba, baabba, ababba, bababa \\rbrace\\end{aligned}$$\n\n**Remark**. Some closure properties with respect to the shuffle\noperation: let $\\mathscr{R}$ be the family of regular languages, and\n$\\mathscr{F}$ the family of context-free languages. Then $\\mathscr{R}$\nis closed under $\\diamond$. $\\mathscr{F}$ is not closed under\n$\\diamond$. However, if $L_1\\in \\mathscr{R}$ and $L_2\\in \\mathscr{F}$,\nthen $L_1 \\diamond L_2 \\in \\mathscr{F}$. The proofs of these closure\nproperties can be found in the reference.\n\n[9]{} M. Ito, [*Algebraic Theory of Automata and Languages*]{}, World\nScientific, Singapore (2004).",
  "language": "INFORMAL",
  "phrase": "Shuffle Of Languages",
  "remarks": "",
  "citations": [
    {
      "textCitation": "https://planetmath.org/ShuffleOfLanguages"
    }
  ],
  "indexable": true
}