{
  "alternatePhrases": [],
  "definition": "### Constructing a Derivation from a Derivation Tree {#constructing-a-derivation-from-a-derivation-tree .unnumbered}\n\nLet $G$ be a context-free grammar. Given a (finite) derivation tree $T$\nof $G$, we can construct a derivation $D$ of $G$. There are two ways of\ndoing this: top-down, or bottom-up.\n\nThe idea with the top-down approach is to build the derivation one\nderivation step at a time, starting from the root of the tree. During\neach step, a node with children is picked so that the next derivation\nstep is formed, thus creating a new derivation with the new derivation\nstep attached. Do this until all nodes of the tree are used.\n\nTo facilitate the discussion, for each node $n$ of $T$, denote $[n]$ the\nlabel of $n$.\n\nThe top-down approach works as follows:\n\n1.  Set $X_0=Y_0=:\\lbrace r \\rbrace$, and $D_0$ the derivation\n    $\\sigma=[r]$, where $r$ is the root of $T$.\n\n2.  Suppose $X_i,Y_i$ and $D_i$ are defined for $i\\ge 0$, and\n    $Y_i = \\lbrace n_1, \\ldots, n_k \\rbrace$ with $n_1 < \\cdots < n_k$.\n    It is easy to see that $D_i$ is the derivation\n    $\\sigma \\Rightarrow^* [n_1]\\cdots [n_k]$.\n\n    If none of the elements of $Y$ have children, then set $D:=D_i$.\n    Otherwise, pick a node $n_j \\in Y_i$ with children\n    $n_1', \\ldots, n_m'$ such that $n_1' < \\cdots < n_m'$. Then set\n\n    -   $X_{i+1}:=X_i \\cup \\lbrace n_j \\rbrace$,\n\n    -   $Y_{i+1} := (Y_i - \\lbrace n_j \\rbrace ) \\cup \\lbrace n_1' , \\ldots, n_m'\\rbrace$,\n        and\n\n    -   $D_{i+1} :=D_i \\Rightarrow [n_1] \\cdots [n_{j-1}][n_1'] \\cdots [n_m'] [n_{j+1}] \\cdots [n_k]$.\n\nSince $T$ is finite, $D$ can be constructed in a finite number of steps\nabove.\n\n**Definition**. A derivation tree $T$ is said to *correspond to* a\nderivation $D$ if $D$ can be constructed from $T$ from the top-down.\n\nFrom the construction above, one sees that every derivation tree\ncorresponds to at least one derivation. But it may correspond to more\nthan one derivation. If, in the second step of the construction above,\none always picks the smallest node with children in each step, then the\ncorresponding derivation is the leftmost derivation. Similarly,\nconsistently picking the largest node in each step results in the\nrightmost derivation. This shows that a derivation tree $T$ corresponds\nto a unique leftmost derivation (written $LD(T)$) as well as a unique\nrightmost derivation (written $RD(T)$).\n\nThe bottom-up approach starts out with the result $u$ of the derivation\ntree $T$. The result corresponds to leaves of $T$. Partition the set of\nleaves into blocks, so that two leaves belonging to the same block if\nthey have the same parent. Pick a block $B$ of leaves, and form a new\nword $u_1$ from $u$ by replacing the labels of leaves in $B$ by the\nlabel of their parent. Then $u_1\\Rightarrow u$ is a derivation step.\nNext, form a new tree $T_1$ from $T$ by removing the leaves of $T$ in\n$B$. So $u_1$ is now the result of $T_1$. Repeat the process just\ndescribed, until all of the nodes are removed ($T_i=\\varnothing$ for\nsome $i$), which is possible since $T$ is finite. What we end up with is\na derivation. We will leave the formal detail to the reader.\n\nA derivation can be constructed from the top-down iff it can be\nconstructed from the bottom-up.\n\n### Constructing a Derivation Tree from a Derivation {#constructing-a-derivation-tree-from-a-derivation .unnumbered}\n\nConversely, given a derivation\n$D=\\sigma \\Rightarrow W_1 \\Rightarrow \\cdots \\Rightarrow W_n$, one can\nconstruct a derivation tree $T$ such that $D$ corresponds to $T$. The\nway this works is as follows: start with the tree with a single node\nwhose label is $\\sigma$. At each derivation step, additional nodes are\nadded from the tree constructed so far, until the last derivation step\nis processed. The tree so constructed has a natural linear ordering, and\nhence is a derivation tree, which $D$ corresponds to. This construction\ncan be formalized as follows:\n\n1.  Defining nodes: (The nodes of the tree $T$ will be tuples of\n    positive integers)\n\n    1.  Set node $(1)$ whose label is $\\sigma$.\n\n    2.  Suppose nodes are defined for symbols occurring in $W_i$. Look\n        at the derivation step $W_i \\Rightarrow W_{i+1}$. Suppose it is\n        based on production $P\\to Q$, and $(p_1, \\ldots, p_m)$ is the\n        node whose label is $P$.\n\n        -   If $Q=N_1 \\cdots N_k$, where each $N_j\\in \\Sigma$, then\n            define nodes\n            $$(p_1, \\ldots, p_m,1),\\ldots, (p_1, \\ldots, p_m,k)$$ whose\n            labels are $N_1, \\ldots, N_k$ respectively.\n\n        -   If $Q=\\lambda$, then define one node $(p_1, \\ldots, p_m,1)$\n            whose label is $\\lambda$.\n\n    3.  Continue (b) until nodes whose labels are symbols forming word\n        $W_n$ are defined.\n\n2.  Defining arrows: Given two nodes $p=(p_1,\\ldots,p_r)$ and\n    $q=(q_1,\\ldots, q_s)$, an arrow is constructed from $p$ to $q$ iff\n    $s=r+1$ and $p_1=q_1,\\ldots, p_r=q_r$.\n\n3.  Extending the partial order on $T$ to a linear order based on the\n    nodes: see the entry on ordered tree for detail.\n\nThe algorithm shows that the derivation tree is uniquely constructed.\n\n**Definition**. Given a derivation $D$, the derivation tree of $D$,\ndenoted by $T_D$, is the ordered tree constructed above from $D$.\n\nIt is easy to see that $T_D$ corresponds to $D$.\n\n**Remark**. Suppose $u$ is a word derived by a derivation $D$. One can\nfind the leftmost derivation $D'$ of $u$ using the methods provided\nabove: first find $T_D$ of $D$, then find $LD(T_D)$, and set\n$D'=LD(T_D)$.\n\n[9]{} H.R. Lewis, C.H. Papadimitriou, [*Elements of the Theory of\nComputation*]{}. Prentice-Hall, Englewood Cliffs, New Jersey (1981). A.\nSalomaa, [*Formal Languages*]{}, Academic Press, New York (1973). J.E.\nHopcroft, J.D. Ullman, [*Formal Languages and Their Relation to\nAutomata*]{}, Addison-Wesley, (1969).",
  "language": "INFORMAL",
  "phrase": "Derivation Tree Of A Derivation",
  "remarks": "",
  "citations": [
    {
      "textCitation": "https://planetmath.org/DerivationTreeOfADerivation"
    }
  ],
  "indexable": true
}