{
  "argumentText": "The following proof is essentially Lagrange\u2019s original, from around\n1770. First, we need three lemmas.\n\nFor any integers $a,b,c,d,w,x,y,z$, $$\\begin{aligned}\n(a^2+b^2+c^2+d^2)(w^2+x^2+y^2+z^2) & = & (aw+bx+cy+dz)^2 \\\\\n& + & (ax-bw-cz+dy)^2 \\\\\n& + & (ay+bz-cw-dx)^2 \\\\\n& + & (az-by+cx-dw)^2.\\end{aligned}$$\n\nThis is the Euler four-square identity, q.v., with different notation.\n\nIf $2m$ is a sum of two squares, then so is $m$.\n\nSay $2m=x^2+y^2$. Then $x$ and $y$ are both even or both odd. Therefore,\nin the identity $$m=\\Big(\\frac{x-y}{2}\\Big)^2 +\n\\Big(\\frac{x+y}{2}\\Big)^2,$$ both fractions on the right side are\nintegers.\n\nIf $p$ is an odd prime, then $a^2+b^2+1=kp$ for some integers $a,b,k$\nwith $0<k<p$.\n\nLet $p = 2n + 1$. Consider the sets\n$$A:=\\lbrace a^2 \\mid a=0,1,...,n\\rbrace\\quad\\mbox{ and }\\quad B:=\\lbrace -b^2-1 \\mid b=0,1,...,n \\rbrace.$$\nWe have the following facts:\n\n1.  No two elements in $A$ are congruent mod $p$, for if\n    $a^2\\equiv c^2 \\pmod p$, then either $p\\mid (a-c)$ or $p\\mid (a+c)$\n    by unique factorization of primes. Since $a-c, a+c \\le 2n< p$, and\n    $0\\le a,c$, we must have $a=c$.\n\n2.  Similarly, no two elements in $B$ are congruent mod $p$.\n\n3.  Furthermore, $A\\cap B=\\varnothing$ since elements of $A$ are all\n    non-negative, while elements of $B$ are all negative.\n\n4.  Therefore, $C:=A\\cup B$ has $2n+2$, or $p+1$ elements.\n\nTherefore, by the pigeonhole principle, two elements in $C$ must be\ncongruent mod $p$. In addition, by the first two facts, the two elements\nmust come from different sets. As a result, we have the following\nequation: $$a^2+b^2+1=kp$$ for some $k$. Clearly $k$ is positive. Also,\n$p^2 = (2n + 1)^2 > 2n^2 + 1 \\ge a^2+b^2+1 = kp$, so $p > k$.\n\nBasically, Lemma 3 says that for any prime $p$, some multiple $0<m<p$ of\n$p$ is a sum of four squares, since $a^2+b^2+1=a^2+b^2+1^2+0^2$.\n\nBy Lemma 1 we need only show that an arbitrary prime $p$ is a sum of\nfour squares. Since that is trivial for $p=2$, suppose $p$ is odd. By\nLemma 3, we know $$mp=a^2+b^2+c^2+d^2$$ for some $m,a,b,c,d$ with\n$0<m<p$. If $m=1$, then we are done. To complete the proof, we will show\nthat if $m>1$ then $np$ is a sum of four squares for some $n$ with\n$1\\le n<m$.\n\nIf $m$ is even, then none, two, or all four of $a,b,c,d$ are even; in\nany of those cases, we may break up $a,b,c,d$ into two groups, each\ngroup containing elements of the same parity. Then Lemma 2 allows us to\ntake $n = m/2$.\n\nNow assume $m$ is odd but $>1$. Write $$\\begin{aligned}\n       w & \\equiv & a\\pmod{m} \\\\\n       x & \\equiv & b\\pmod{m} \\\\\n       y & \\equiv & c\\pmod{m} \\\\\n       z & \\equiv & d\\pmod{m}\\end{aligned}$$ where $w,x,y,z$ are all in\nthe interval $(-m/2, m/2)$. We have\n$$w^2+x^2+y^2+z^2 < 4\\cdot \\frac{m^2}{4} = m^2$$\n$$w^2+x^2+y^2+z^2\\equiv 0\\pmod{m}.$$ So $w^2+x^2+y^2+z^2 = nm$ for some\ninteger non-negative $n$. Since $w^2+x^2+y^2+z^2 < m^2$, $n<m$. In\naddition, if $n=0$, then $w=x=y=z=0$, so that\n$a\\equiv b\\equiv c\\equiv d \\equiv 0 \\pmod m$, which implies\n$mp=a^2+b^2+c^2+d^2=m^2q$, or that $m|p$. But $p$ is prime, forcing\n$m=p$, and contradicting $m<p$. So $0<n<m$. Look at the product\n$(a^2+b^2+c^2+d^2)(w^2+x^2+y^2+z^2)$ and examine Lemma 1. On the left is\n$nm^2p$. One the right, we have a sum of four squares. Evidently three\nof them $$ax-bw-cz+dy=(ax-bw)+(dy-cz)$$ $$ay+bz-cw-dx=(ay-cw)+(bz-dx)$$\n$$az-by+cx-dw=(az-dw)+(cx-by)$$ are multiples of $m$. The same is true\nof the other sum on the right in Lemma 1:\n$$aw+bx+cy+dz \\equiv w^2+x^2+y^2+z^2 \\equiv 0\\pmod{m}.$$ The equation in\nLemma 1 can therefore be divided through by $m^2$. The result is an\nexpression for $np$ as a sum of four squares. Since $0<n<m$, the proof\nis complete.\n\n**Remark:** Lemma 3 can be improved: it is enough for $p$ to be an odd\nnumber, not necessarily prime. But that stronger statement requires a\nlonger proof.",
  "conclusion": "#P_LagrangesFoursquareTheorem",
  "language": "INFORMAL",
  "premises": [
    "#P_planetmath_ZFC"
  ],
  "citations": [
    {
      "textCitation": "https://planetmath.org/ProofOfLagrangesFoursquareTheorem"
    }
  ],
  "indexable": false,
  "names": [
    "proof of Lagrange's four-square theorem"
  ]
}